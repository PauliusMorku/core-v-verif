# Experimental CSR access test
# Generated by gen_csr_test.py (part of riscv-dv)
# Manual edits to fit with BSP and enhance debug
.include "user_define.h"
.section .text.start
.globl _start
.section .text
#.include "user_init.s"
.type _start, @function

_start:
    j _start_main

.globl _start_main
.section .text
_start_main:


############################################
#
# Generated code starts here generated...
#
############################################

	# mstatus
	li x1, 0xa5a5a5a5
	csrrw x4, 768, x1
	li x1, 0x00001800
	bne x1, x4, csr_fail
	li x1, 0x5a5a5a5a
	csrrw x4, 768, x1
	li x1, 0x00001880
	bne x1, x4, csr_fail
	li x1, 0x98672831
	csrrw x4, 768, x1
	li x1, 0x00001808
	bne x1, x4, csr_fail
	li x1, 0xa5a5a5a5
	csrrs x4, 768, x1
	li x1, 0x00001800
	bne x1, x4, csr_fail
	li x1, 0x5a5a5a5a
	csrrs x4, 768, x1
	li x1, 0x00001880
	bne x1, x4, csr_fail
	li x1, 0xfe006006
	csrrs x4, 768, x1
	li x1, 0x00001888
	bne x1, x4, csr_fail
	li x1, 0xa5a5a5a5
	csrrc x4, 768, x1
	li x1, 0x00001888
	bne x1, x4, csr_fail
	li x1, 0x5a5a5a5a
	csrrc x4, 768, x1
	li x1, 0x00001808
	bne x1, x4, csr_fail
	li x1, 0x00ae59a9
	csrrc x4, 768, x1
	li x1, 0x00001800
	bne x1, x4, csr_fail
	csrrwi x4, 768, 0b00101
	li x1, 0x00001800
	bne x1, x4, csr_fail
	csrrwi x4, 768, 0b11010
	li x1, 0x00001800
	bne x1, x4, csr_fail
	csrrwi x4, 768, 0b10110
	li x1, 0x00001808
	bne x1, x4, csr_fail
	csrrsi x4, 768, 0b00101
	li x1, 0x00001800
	bne x1, x4, csr_fail
	csrrsi x4, 768, 0b11010
	li x1, 0x00001800
	bne x1, x4, csr_fail
	csrrsi x4, 768, 0b10111
	li x1, 0x00001808
	bne x1, x4, csr_fail
	csrrci x4, 768, 0b00101
	li x1, 0x00001808
	bne x1, x4, csr_fail
	csrrci x4, 768, 0b11010
	li x1, 0x00001808
	bne x1, x4, csr_fail
	csrrci x4, 768, 0b11010
	li x1, 0x00001800
	bne x1, x4, csr_fail
	# misa
	li x1, 0xa5a5a5a5
	csrrw x4, 769, x1
	li x1, 0x40801104
	bne x1, x4, csr_fail
	li x1, 0x5a5a5a5a
	csrrw x4, 769, x1
	li x1, 0x40801104
	bne x1, x4, csr_fail
	li x1, 0xad016dac
	csrrw x4, 769, x1
	li x1, 0x40801104
	bne x1, x4, csr_fail
	li x1, 0xa5a5a5a5
	csrrs x4, 769, x1
	li x1, 0x40801104
	bne x1, x4, csr_fail
	li x1, 0x5a5a5a5a
	csrrs x4, 769, x1
	li x1, 0x40801104
	bne x1, x4, csr_fail
	li x1, 0x322274f7
	csrrs x4, 769, x1
	li x1, 0x40801104
	bne x1, x4, csr_fail
	li x1, 0xa5a5a5a5
	csrrc x4, 769, x1
	li x1, 0x40801104
	bne x1, x4, csr_fail
	li x1, 0x5a5a5a5a
	csrrc x4, 769, x1
	li x1, 0x40801104
	bne x1, x4, csr_fail
	li x1, 0xf650ec21
	csrrc x4, 769, x1
	li x1, 0x40801104
	bne x1, x4, csr_fail
	csrrwi x4, 769, 0b00101
	li x1, 0x40801104
	bne x1, x4, csr_fail
	csrrwi x4, 769, 0b11010
	li x1, 0x40801104
	bne x1, x4, csr_fail
	csrrwi x4, 769, 0b00101
	li x1, 0x40801104
	bne x1, x4, csr_fail
	csrrsi x4, 769, 0b00101
	li x1, 0x40801104
	bne x1, x4, csr_fail
	csrrsi x4, 769, 0b11010
	li x1, 0x40801104
	bne x1, x4, csr_fail
	csrrsi x4, 769, 0b10010
	li x1, 0x40801104
	bne x1, x4, csr_fail
	csrrci x4, 769, 0b00101
	li x1, 0x40801104
	bne x1, x4, csr_fail
	csrrci x4, 769, 0b11010
	li x1, 0x40801104
	bne x1, x4, csr_fail
	csrrci x4, 769, 0b11110
	li x1, 0x40801104
	bne x1, x4, csr_fail
	# mscratch
	li x1, 0xa5a5a5a5
	csrrw x4, 832, x1
	li x1, 0x00000000
	bne x1, x4, csr_fail
	li x1, 0x5a5a5a5a
	csrrw x4, 832, x1
	li x1, 0xa5a5a5a5
	bne x1, x4, csr_fail
	li x1, 0x18640eee
	csrrw x4, 832, x1
	li x1, 0x5a5a5a5a
	bne x1, x4, csr_fail
	li x1, 0xa5a5a5a5
	csrrs x4, 832, x1
	li x1, 0x18640eee
	bne x1, x4, csr_fail
	li x1, 0x5a5a5a5a
	csrrs x4, 832, x1
	li x1, 0xbde5afef
	bne x1, x4, csr_fail
	li x1, 0x2ebbce35
	csrrs x4, 832, x1
	li x1, 0xffffffff
	bne x1, x4, csr_fail
	li x1, 0xa5a5a5a5
	csrrc x4, 832, x1
	li x1, 0xffffffff
	bne x1, x4, csr_fail
	li x1, 0x5a5a5a5a
	csrrc x4, 832, x1
	li x1, 0x5a5a5a5a
	bne x1, x4, csr_fail
	li x1, 0x087361e6
	csrrc x4, 832, x1
	li x1, 0x00000000
	bne x1, x4, csr_fail
	csrrwi x4, 832, 0b00101
	li x1, 0x00000000
	bne x1, x4, csr_fail
	csrrwi x4, 832, 0b11010
	li x1, 0x00000005
	bne x1, x4, csr_fail
	csrrwi x4, 832, 0b10110
	li x1, 0x0000001a
	bne x1, x4, csr_fail
	csrrsi x4, 832, 0b00101
	li x1, 0x00000016
	bne x1, x4, csr_fail
	csrrsi x4, 832, 0b11010
	li x1, 0x00000017
	bne x1, x4, csr_fail
	csrrsi x4, 832, 0b11010
	li x1, 0x0000001f
	bne x1, x4, csr_fail
	csrrci x4, 832, 0b00101
	li x1, 0x0000001f
	bne x1, x4, csr_fail
	csrrci x4, 832, 0b11010
	li x1, 0x0000001a
	bne x1, x4, csr_fail
	csrrci x4, 832, 0b01001
	li x1, 0x00000000
	bne x1, x4, csr_fail
	csrr x4, 832
	li x1, 0x00000000
	bne x1, x4, csr_fail

############################################
#
# Manually generated
#
############################################
test_done:
    lui a0,print_port>>12
    addi a1,zero,'\n'
    sw a1,0(a0)
    addi a1,zero,'C'
    sw a1,0(a0)
    addi a1,zero,'V'
    sw a1,0(a0)
    addi a1,zero,'3'
    sw a1,0(a0)
    addi a1,zero,'2'
    sw a1,0(a0)
    addi a1,zero,' '
    sw a1,0(a0)
    addi a1,zero,'D'
    sw a1,0(a0)
    addi a1,zero,'O'
    sw a1,0(a0)
    addi a1,zero,'N'
    sw a1,0(a0)
    addi a1,zero,'E'
    sw a1,0(a0)
    addi a1,zero,'\n'
    sw a1,0(a0)
    sw a1,0(a0)

csr_pass:
    li x18, 123456789
    li x17, 0x20000000
    sw x18,0(x17)
    wfi

csr_fail:
    lui a0,print_port>>12
    addi a1,zero,'\n'
    sw a1,0(a0)
    addi a1,zero,'C'
    sw a1,0(a0)
    addi a1,zero,'V'
    sw a1,0(a0)
    addi a1,zero,'3'
    sw a1,0(a0)
    addi a1,zero,'2'
    sw a1,0(a0)
    addi a1,zero,' '
    sw a1,0(a0)
    addi a1,zero,'F'
    sw a1,0(a0)
    addi a1,zero,'A'
    sw a1,0(a0)
    addi a1,zero,'I'
    sw a1,0(a0)
    addi a1,zero,'L'
    sw a1,0(a0)
    addi a1,zero,'\n'
    sw a1,0(a0)
    sw a1,0(a0)

    li x18, 1
    li x17, 0x20000000
    sw x18,0(x17)
    wfi
